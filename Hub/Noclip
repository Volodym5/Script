local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local Clipon = false
local Stepped

-- Function to toggle noclip mode
local function toggleNoclip()
    if Clipon then
        Clipon = false
        print("Noclip disabled")
        if Stepped then
            Stepped:Disconnect()
        end
        -- Reset character collision to normal
        for _, child in pairs(player.Character:GetDescendants()) do
            if child:IsA("BasePart") then
                child.CanCollide = true
            end
        end
    else
        Clipon = true
        print("Noclip enabled")
        Stepped = game:GetService("RunService").Stepped:Connect(function()
            if Clipon then
                -- Disable collision for parts of the player's character
                for _, child in pairs(player.Character:GetDescendants()) do
                    if child:IsA("BasePart") then
                        child.CanCollide = false
                    end
                end
            else
                Stepped:Disconnect()
            end
        end)
    end
end

-- Toggle noclip on mouse click
game:GetService("UserInputService").InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        toggleNoclip()
    end
end)
